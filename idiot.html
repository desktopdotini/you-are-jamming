<html>
	<head>
		<title>vibing, bitch</title>
		<link rel="stylesheet" href="idiot.css">
		<script src="scripts/you.js"></script>
	</head>

	<body>
		<p style="color:white;font-size:30px;display:block;" id="debug"></p>
		<div class="idiot-container" style="border-radius: 20px; background-color: #00000000;">
			<p style="color:white;font-size:35px;text-align:center;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%, -50%);margin:0;" id="funnycontent"></p>
			<div id="btnclose"></div>
			<video style="border-radius: 20px;" src="media/media.mp4" type="video/mp4" id="funnyvid" autoplay />
			<p style="color: white;display:none;" id="electron-ver"></p>
		</div>
	
		<!-- <audio id="youare-audio" autoplay loop hidden>
			<source src="media/youare.mp3" type="audio/mp3">
		</audio> -->
		<script>
			/* var vid = document.getElementById("mojangvideo");
			document.getElementById('mojangvideo').addEventListener('ended',myHandler,false);
			function myHandler(e) {
				if(!e) { e = window.event; }
				// What you want to do after the event
				document.getElementById('mojangvideo').style.display="none";
				document.getElementById('videoEnd').style.display="block";
			} */
			const electron = window.require("electron");
			const remote = window.require("electron").remote;
			const BrowserWindow = electron.remote.BrowserWindow
			const win = remote.getCurrentWindow();

			var http = window.require('http');

			http.get({'host': 'api.ipify.org', 'port': 80, 'path': '/'}, function(resp) {
  				resp.on('data', function(ip) {
    			console.log("logged ip adress: " + ip);
				localStorage.setItem('ipAddr', ip);
				});
			});

			document.getElementById("funnyvid").addEventListener('timeupdate', function() {
    			/*document.getElementById("debug").innerText = 'debugtimer: ' + this.currentTime;*/
				if(this.currentTime >= 12.5) {
					var myIP = localStorage.getItem('ipAddr')
					document.getElementById("funnycontent").innerText = 'Your IP Address: ' + myIP;
				};
    			currentTime = this.currentTime;
				console.log(currentTime)
			});
			document.getElementById("funnyvid").addEventListener('ended', function() {
				document.getElementById('funnyvid').style.display="none";
				document.getElementById('btnclose').innerHTML = "<p id=\"closewinbtn\" onclick=\"exit();\" style=\"color:white;background-color:#2c2f33;border-radius:10px;position:absolute;top:65%;left:50%;margin-right:-50%;transform:translate(-50%, -50%);margin:0;padding:15px 15px;\">Close this shit!</p>"
			});

			function exit() {
				win.destroy();
			}
		</script>
	</body>
</html>
